<?php

namespace Tests\Browser;

use Laravel\Dusk\Browser;
use Tests\DuskTestCase;

/**
 * End-to-End Tests
 * 
 * Tests complete user workflows for {FEATURE_NAME}
 * Framework: Laravel Dusk
 * 
 * Generated by: /gbm.qa.scaffold-tests
 */
class {Feature}E2ETest extends DuskTestCase
{
    /** @test */
    public function user_can_complete_main_workflow()
    {
        $this->browse(function (Browser $browser) {
            $browser->visit('/')
                    ->clickLink('{Feature Name}')
                    ->assertPathIs('/{feature-path}')
                    ->type('name', 'Test Name')
                    ->type('email', 'test@example.com')
                    ->press('Submit')
                    ->assertSee('Success')
                    ->assertPathIs('/{feature-path}/success');
        });
    }
    
    /** @test */
    public function it_validates_form_fields()
    {
        $this->browse(function (Browser $browser) {
            $browser->visit('/{feature-path}/new')
                    ->press('Submit')
                    ->assertSee('required');
        });
    }
    
    /** @test */
    public function user_can_create_new_item()
    {
        $this->browse(function (Browser $browser) {
            $browser->visit('/{feature-path}')
                    ->clickLink('Create New')
                    ->assertPathIs('/{feature-path}/new')
                    ->type('name', 'New Item')
                    ->press('Submit')
                    ->assertPathIs('/{feature-path}')
                    ->assertSee('New Item');
        });
    }
    
    /** @test */
    public function user_can_edit_existing_item()
    {
        $this->browse(function (Browser $browser) {
            $browser->visit('/{feature-path}/1')
                    ->clickLink('Edit')
                    ->type('name', 'Updated Item')
                    ->press('Save')
                    ->assertSee('Updated Item');
        });
    }
    
    /** @test */
    public function user_can_delete_item()
    {
        $this->browse(function (Browser $browser) {
            $browser->visit('/{feature-path}/1')
                    ->press('Delete')
                    ->whenAvailable('.modal', function ($modal) {
                        $modal->press('Confirm');
                    })
                    ->assertPathIs('/{feature-path}')
                    ->assertDontSee('Test Item');
        });
    }
}

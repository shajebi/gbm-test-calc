package com.example.integration;

import org.junit.jupiter.api.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;

import static org.assertj.core.api.Assertions.*;

/**
 * Database Integration Tests
 * 
 * Tests database operations for {Model}
 * Framework: JUnit 5 with Spring Data JPA
 * 
 * Generated by: /gbm.qa.scaffold-tests
 */
@DataJpaTest
class {Model}DatabaseIntegrationTest {
    
    @Autowired
    private TestEntityManager entityManager;
    
    @Autowired
    private {Model}Repository repository;
    
    @Test
    void shouldCreate{Model}WithValidData() {
        // Arrange
        {Model} {model} = new {Model}();
        {model}.setName("Test {Model}");
        
        // Act
        {Model} saved = repository.save({model});
        
        // Assert
        assertThat(saved.getId()).isNotNull();
        assertThat(saved.getName()).isEqualTo("Test {Model}");
    }
    
    @Test
    void shouldFind{Model}ById() {
        // Arrange
        {Model} {model} = new {Model}();
        {model}.setName("Test");
        {Model} saved = entityManager.persistAndFlush({model});
        
        // Act
        Optional<{Model}> found = repository.findById(saved.getId());
        
        // Assert
        assertThat(found).isPresent();
        assertThat(found.get().getName()).isEqualTo("Test");
    }
    
    @Test
    void shouldUpdate{Model}Fields() {
        // Arrange
        {Model} {model} = new {Model}();
        {model}.setName("Original");
        {Model} saved = entityManager.persistAndFlush({model});
        
        // Act
        saved.setName("Updated");
        {Model} updated = repository.save(saved);
        
        // Assert
        assertThat(updated.getName()).isEqualTo("Updated");
    }
    
    @Test
    void shouldDelete{Model}() {
        // Arrange
        {Model} {model} = new {Model}();
        {model}.setName("To Delete");
        {Model} saved = entityManager.persistAndFlush({model});
        
        // Act
        repository.delete(saved);
        
        // Assert
        assertThat(repository.findById(saved.getId())).isEmpty();
    }
}
